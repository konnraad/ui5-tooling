const N=+function(){var z=80;function b(i){var s=i.getBoundingClientRect(),a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,d=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return{top:s.top+a,left:s.left+d}}function k(){var i=null,s=null,a=null;function d(){document.body.addEventListener("click",function(t){t.target.getAttribute("data-action")!=="zoom"||t.target.tagName!=="IMG"||e(t)})}function e(t){if(t.stopPropagation(),!document.body.classList.contains("zoom-overlay-open")){if(t.metaKey||t.ctrlKey)return o();r({forceDispose:!0}),i=W(t.target),i.zoomImage(),E()}}function o(){window.open(event.target.getAttribute("data-original")||event.target.currentSrc||event.target.src,"_blank")}function r(t){t=t||{forceDispose:!1},i&&(i[t.forceDispose?"dispose":"close"](),T(),i=null)}function E(){window.addEventListener("scroll",y),document.addEventListener("click",c),document.addEventListener("keyup",L),document.addEventListener("touchstart",l),document.addEventListener("touchend",c)}function T(){window.removeEventListener("scroll",y),document.removeEventListener("keyup",L),document.removeEventListener("click",c),document.removeEventListener("touchstart",l),document.removeEventListener("touchend",c)}function y(t){s===null&&(s=window.pageYOffset);var m=s-window.pageYOffset;Math.abs(m)>=40&&r()}function L(t){t.keyCode==27&&r()}function c(t){t.stopPropagation(),t.preventDefault(),r()}function l(t){a=t.touches[0].pageY,t.target.addEventListener("touchmove",n)}function n(t){Math.abs(t.touches[0].pageY-a)<=10||(r(),t.target.removeEventListener("touchmove",n))}return{listen:d}}var W=function(){var i=null,s=null,a=null,d=null,e=null,o=null,r=null;function E(){var n=document.createElement("img");n.onload=function(){i=Number(n.height),s=Number(n.width),T()},n.src=e.currentSrc||e.src}function T(){o=document.createElement("div"),o.className="zoom-img-wrap",o.style.position="absolute",o.style.top=b(e).top+"px",o.style.left=b(e).left+"px",r=e.cloneNode(),r.style.visibility="hidden",e.style.width=e.offsetWidth+"px",e.parentNode.replaceChild(r,e),document.body.appendChild(o),o.appendChild(e),e.classList.add("zoom-img"),e.setAttribute("data-action","zoom-out"),a=document.createElement("div"),a.className="zoom-overlay",document.body.appendChild(a),y(),L()}function y(){var C;var n=window.innerWidth*.8,t=e.width/e.height,m=(C=e==null?void 0:e.src)==null?void 0:C.endsWith(".svg");e.offsetWidth;var u=m?n:s,v=m?n/t:i,f=u/e.width,p=window.innerHeight-z,g=window.innerWidth-z,h=u/v,w=g/p;u<g&&v<p?d=f:h<w?d=p/v*f:d=g/u*f}function L(){e.offsetWidth;var n=b(e),t=window.pageYOffset,m=t+window.innerHeight/2,u=window.innerWidth/2,v=n.top+e.height/2,f=n.left+e.width/2,p=Math.round(m-v),g=Math.round(u-f),h="scale("+d+")",w="translate("+g+"px, "+p+"px) translateZ(0)";e.style.webkitTransform=h,e.style.msTransform=h,e.style.transform=h,o.style.webkitTransform=w,o.style.msTransform=w,o.style.transform=w,document.body.classList.add("zoom-overlay-open")}function c(){if(document.body.classList.remove("zoom-overlay-open"),document.body.classList.add("zoom-overlay-transitioning"),e.style.webkitTransform="",e.style.msTransform="",e.style.transform="",o.style.webkitTransform="",o.style.msTransform="",o.style.transform="",!1 in document.body.style)return l();o.addEventListener("transitionend",l),o.addEventListener("webkitTransitionEnd",l)}function l(){e.removeEventListener("transitionend",l),e.removeEventListener("webkitTransitionEnd",l),!(!o||!o.parentNode)&&(e.classList.remove("zoom-img"),e.style.width="",e.setAttribute("data-action","zoom"),r.parentNode.replaceChild(e,r),o.parentNode.removeChild(o),a.parentNode.removeChild(a),document.body.classList.remove("zoom-overlay-transitioning"))}return function(n){return e=n,{zoomImage:E,close:c,dispose:l}}}();k().listen()}();export{N as default};
